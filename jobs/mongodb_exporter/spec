---
name: mongodb_exporter

packages: 
  - mongodb_exporter

templates:
  bin/mongodb_exporter_ctl: bin/mongodb_exporter_ctl
  js/create_clustermonitor_user.js: js/create_clustermonitor_user.js
  bin/create_clustermonitor_user.sh: bin/create_clustermonitor_user.sh

consumes:
  - name: exporter
    type: mongodb_exporter
    
provides:
  - name: exporter
    type: mongodb_exporter

properties:
  auth_pass:
    description: "Password for basic auth"
  auth_user:
    description: "Username for basic auth"
  groups_enabled:
    description: "Comma-separated list of groups to use, for more info see: docs.mongodb.org/manual/reference/command/serverStatus/"
  log_backtrace_at:
    description: "When logging hits line file:N, emit a stack trace"
  collect_database:
    description: "Collect MongoDB database metrics"
  mongodb.bin_path:
    description: "Where mongoDB binaries are on the deployment"
  mongodb.clustermonitor.username:
    description: "User used for mongodb exporter"
  mongodb.clustermonitor.password:
    description: "Password used for mongodb exporter" 
  mongodb.root.username:
    description: ""
  mongodb.root.password:
    description: ""  
  mongodb.uri:
    description: "Mongodb URI, format: [mongodb://][user:pass@]host1[:port1][,host2[:port2],...][/database][?options]"
  mongodb.tls:
    description: "Enable tls connection with mongo server"
  mongodb.tls_ca:
    description: "MongoDB SSL CA (PEM encoded)"
  mongodb.tls_cert:
    description: "MongoDB SSL Certificate (PEM encoded)"
  mongodb.tls_private_key:
    description: "MongoDB SSL Private Key (PEM encoded)"
  mongodb.tls_disable_hostname_validation:
    description: "Do hostname validation for server connection"
  v:
    description: "Log level for V logs"
  vmodule:
    description: "Comma-separated list of pattern=N settings for file-filtered logging"
  web.port:
    description: "Port on which to expose metrics and web interface"
    default: 9001
  web.metrics_path:
    description: "Path under which to expose metrics"
  web.tls_cert:
    description: "SSL Certificate (PEM encoded)"
  web.tls_client_ca:
    description: "SSL Client CA (PEM encoded)"
  web.tls_private_key:
    description: "SSL Private Key (PEM encoded)"
